@namespace Microsoft.AspNetCore.Components
@inherits ComponentBase
@typeparam Element

<Virtualization Elements="Elements" Initial="Initial" IsReverse=IsReverse Jump="Jump"
                Plus="Plus" RenderElement="RenderElement">
    <RenderComponent>
        @{
            var newRenderInfo = context with
                {
                    RenderContainer = context.RenderContainer with
                    {
                        CSS = context.RenderContainer.CSS + " virtualizationSimpleContainer"
                    }
                };
            var renderContainer = newRenderInfo.RenderContainer;
            var renderElement = newRenderInfo.RenderElement;
        }
        <div class="@renderContainer.CSS" id="@renderContainer.ID" onscroll="@renderContainer.OnScrollScript" @attributes=ContainerAttributes>
            @if (RenderComponent is { })
            {
                var renderComponent = new RenderVirtualizationSimpleInfo<Element>()
                    {
                        RenderElement = renderElement,
                        GoTop = newRenderInfo.RenderContainer.GoTop
                    };
                @RenderComponent(renderComponent)
            }
            else
            {
                @foreach (var item in renderElement)
                {
                    @item
                }
            }
        </div>
    </RenderComponent>
</Virtualization>